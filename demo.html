<!DOCTYPE html>
<html>
<head>
	<title>view.js demo</title>
	<script src="deps/jquery-1.9.1.min.js"></script>
	<script src="deps/handlebars.js"></script>
	<script src="src/view.js"></script>
</head>
<body>

<!-- our handlebars template -->
<script type="text/html" id="hello-template">
	<p><a href="#" id="click-me">Hello {{name}}</a></p>
</script>

<!-- the div to insert the content into -->
<div id="hello-world"></div>

<script>
// pick a random name
function random_name () {
	var names = ['Joe', 'Sue', 'Bob', 'Steve', 'Jim', 'Anne', 'Dan', 'Rick'];
	return names[Math.floor (Math.random () * names.length)];
}

$(function () {
	// compile the template (note: assumes Handlebars.templates array
	// from Handlebars precompiler, so this is how we define them)
	Handlebars.templates = [];
	Handlebars.templates['hello-template'] = Handlebars.compile ($('#hello-template').html ());

	// define our view
	view.add ({
		name: 'hello',
		selector: '#hello-world',
		template: 'hello-template',
		callback: function (el) {
			// you can access the view as this
			console.log ('Rendered view: ' + this.name);
			console.log ('With the name: ' + this.data.name);
			
			// add event listeners here
			$(el).find ('#click-me').click (function () {
				console.log ('Clicked!');
				view.hello.render ({name: random_name ()});
			});
		}
	});
	
	// render the view
	view.hello.render ({name: 'world'});
});
</script>

</body>
</html>